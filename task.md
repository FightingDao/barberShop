# 全栈移动端应用开发任务

## 项目概述
请根据当前目录中的 `PRD_claude.md` 文件，完成一个完整的全栈移动端应用开发，包括前端、后端、数据库的开发、联调和部署启动。

## 任务要求
在整个执行过程，你跟用户交流请始终使用简体中文。

### 第一阶段：需求分析与技术方案设计

1. **仔细阅读 PRD 文档**
   - 完整阅读 `PRD_claude.md` 文件
   - 理解所有功能需求、业务逻辑和技术要求
   - 识别核心功能模块和优先级

2. **技术栈选型与架构设计**
   - **前端框架**：react + react-vant
   - **后端框架**：Node.js + Koa 或 Python + FastAPI/Flask
   - **数据库**：PostgreSQL（关系型）
   - **API 设计**：RESTful API，清晰的接口文档
   - 设计系统架构图，明确前后端交互流程

3. **输出技术方案文档**
   - 在项目根目录创建 `TECH_DESIGN.md`
   - 包含：技术栈选型理由、系统架构、数据库设计、API 接口设计、目录结构规划

### 第二阶段：项目初始化

4. **创建项目结构**
   ```
   project-root/
   ├── frontend/          # 前端项目
   ├── backend/           # 后端项目
   ├── docs/              # 文档目录
   ├── README.md          # 项目说明
   └── PRD_claude.md      # 原始需求文档
   ```

5. **前端项目初始化**
   - 使用脚手架创建跨端项目
   - 配置开发环境
   - 设置代码规范（ESLint、Prettier）
   - 配置环境变量（开发/生产环境 API 地址）

6. **后端项目初始化**
   - 创建后端项目结构
   - 配置数据库连接
   - 设置中间件（CORS、日志、错误处理等）
   - 配置环境变量

### 第三阶段：数据库设计与实现

7. **数据库设计**
   - 根据 PRD 设计数据表结构
   - 定义表关系（一对一、一对多、多对多）
   - 设计索引优化查询性能
   - 创建 `database/schema.sql` 或 migration 文件

8. **数据库初始化**
   - 编写数据库初始化脚本
   - 创建所有必需的表
   - 插入测试数据（如果需要）
   - 验证数据库连接和表结构

### 第四阶段：后端开发

9. **API 接口开发**
   - 实现所有 PRD 中要求的业务逻辑
   - 按模块组织代码（用户模块、业务模块等）
   - 实现数据验证和错误处理
   - 添加必要的中间件（认证、权限等）

10. **后端功能清单**
    - [ ] 用户认证（注册、登录、JWT/Session）
    - [ ] 数据 CRUD 操作
    - [ ] 业务逻辑实现
    - [ ] 文件上传（如需要）
    - [ ] 数据分页和筛选
    - [ ] 错误处理和日志记录

11. **API 文档**
    - 创建 `backend/API.md`
    - 记录所有接口：请求方法、路径、参数、响应格式
    - 提供请求示例

### 第五阶段：前端开发

12. **页面开发**
    - 根据 PRD 实现所有页面和功能
    - 确保H5 在各移动端都能正常显示
    - 实现响应式布局
    - 使用 react-vant UI框架来开发，保证页面精致美观
    - `UI/` 目录有部分页面的UI设计稿，整个项目请都参照设计稿，缺少的页面也参考UI稿的风格，保证风格统一美观，类airbnb风格

13. **前端功能清单**
    - [ ] 页面路由配置
    - [ ] 用户界面实现
    - [ ] API 接口对接
    - [ ] 数据状态管理（Redux）
    - [ ] 表单验证
    - [ ] 错误提示和加载状态
    - [ ] 本地存储（Token、用户信息等）

14. **跨端适配**
    - 测试 H5 端显示效果
    - 配置 App 端打包（如可能）
    - 处理平台差异化逻辑

### 第六阶段：联调测试

15. **前后端联调**
    - 确保前端能成功调用后端 API
    - 测试所有功能流程
    - 修复接口对接问题
    - 处理跨域问题（CORS）

16. **功能测试**
    - 测试所有核心功能
    - 测试边界情况和异常处理
    - 验证数据持久化
    - 检查用户体验流程

### 第七阶段：部署启动

17. **编写启动脚本**
    - 创建 `start.sh` 或 `start.bat`
    - 自动化启动数据库、后端、前端
    - 或提供详细的启动命令说明

18. **完善 README.md**
    ```markdown
    # 项目名称
    
    ## 技术栈
    - 前端：xxx
    - 后端：xxx
    - 数据库：xxx
    
    ## 快速开始
    
    ### 环境要求
    - Node.js >= 14
    - 数据库版本
    
    ### 安装依赖
    ```bash
    # 后端
    cd backend && npm install
    
    # 前端
    cd frontend && npm install
    ```
    
    ### 配置环境变量
    - 后端：复制 `.env.example` 到 `.env`，配置数据库连接
    - 前端：配置 API 地址
    
    ### 启动项目
    ```bash
    # 启动数据库
    # 根据你的数据库类型启动
    
    # 启动后端（默认端口 4000）
    cd backend && npm run dev
    
    # 启动前端（默认端口 4001）
    cd frontend && npm run dev:h5
    ```
    
    ### 访问应用
    - H5: http://localhost:4001
    - API: http://localhost:4000
    
    ## 功能说明
    [列出主要功能]
    
    ## API 文档
    详见 `backend/API.md`
    ```

19. **启动验证**
    - 启动数据库服务
    - 启动后端服务（确认端口和日志）
    - 启动前端服务（H5 和 App）
    - 在浏览器中验证完整功能流程

## 开发规范

### 代码质量
- 遵循代码规范和最佳实践
- 添加必要的注释
- 函数和变量命名清晰
- 避免硬编码，使用配置文件

### 错误处理
- 后端统一错误处理格式
- 前端友好的错误提示
- 完善的日志记录

### 安全性
- 密码加密存储
- SQL 注入防护
- XSS 防护
- CSRF 防护（如需要）
- API 权限控制

### 性能优化
- 数据库查询优化
- 接口响应时间控制
- 前端资源优化

## 交付物检查清单

- [ ] 前端项目完整可运行
- [ ] 后端项目完整可运行
- [ ] 数据库正确初始化
- [ ] 所有 PRD 功能已实现
- [ ] 前后端成功联调
- [ ] H5 端正常访问
- [ ] API 接口文档完整
- [ ] README.md 包含完整的启动说明
- [ ] 项目可以一键启动或按步骤快速启动
- [ ] 代码结构清晰，易于维护

## 重要提醒

1. **完整性**：必须完成从数据库到后端到前端的完整开发
2. **可运行性**：最终交付的项目必须能够实际运行，不能有占位符或待实现代码
3. **真实业务逻辑**：后端必须包含真实的业务逻辑实现，不能只是返回 mock 数据
4. **数据持久化**：所有数据操作必须真实连接数据库，实现数据的增删改查
5. **跨端支持**：前端必须支持 H5 访问
6. **联调验证**：必须确保前后端完全打通，所有功能可以端到端测试

## 执行步骤

请按照以上阶段顺序执行：
1. 先阅读并分析 PRD，输出技术方案
2. 再初始化项目结构
3. 然后从数据库到后端到前端依次开发
4. 最后联调测试并启动整个应用

在每个阶段完成后，请告知我完成情况和遇到的问题。最终确保整个应用可以成功启动并运行。
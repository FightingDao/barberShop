# 理发店预约App - MVP产品需求文档

## 1. 项目概述

### 1.1 项目背景
传统理发店预约方式依赖电话或到店排队,效率低下且用户体验不佳。本项目旨在通过移动应用简化预约流程,提升用户体验和店铺运营效率。

### 1.2 项目目标
- **用户端**:提供便捷的线上预约服务,减少等待时间
- **商家端**:优化资源调度,提高理发师利用率
- **市场验证**:快速验证市场对线上理发预约服务的需求

### 1.3 MVP范围
本MVP版本聚焦于**预约核心流程**,包含以下功能:
- 顾客浏览并选择理发店
- 选择服务项目
- 选择理发师
- 选择预约时间
- 确认并提交订单
- 查看预约详情

**暂不包含**:支付功能(到店支付)、会员系统、评价系统、营销活动等。

---

## 2. 用户角色

### 2.1 顾客(C端用户)
- **角色描述**:需要理发服务的终端用户
- **核心诉求**:快速找到合适的理发师,选择方便的时间段完成预约
- **技术特征**:熟悉移动应用操作,年龄段18-45岁为主

### 2.2 店长/管理员(B端用户)
- **角色描述**:理发店的运营管理者
- **核心诉求**:管理店铺信息、理发师排班、查看预约情况
- **说明**:MVP阶段B端功能简化,主要通过后台配置实现

---

## 3. 核心用户旅程

### 3.1 完整预约流程概览

```mermaid
flowchart TD
    A[打开App] --> B[选择/搜索理发店]
    B --> C[浏览店铺详情]
    C --> D[点击"立即预约"]
    D --> E[选择服务项目]
    E --> F{是否选择指定理发师?}
    F -->|是| G[选择理发师]
    F -->|否| H[选择"不指定理发师"]
    G --> I[选择预约日期]
    H --> I
    I --> J[选择具体时间段]
    J --> K[填写备注信息]
    K --> L[确认订单详情]
    L --> M{提交预约}
    M -->|成功| N[显示预约成功页]
    M -->|失败| O[显示错误提示]
    O --> I
    N --> P[查看预约详情]
```

### 3.2 关键步骤详细流程图

#### 3.2.1 服务选择流程

```mermaid
flowchart TD
    A[进入服务选择页] --> B[展示服务列表]
    B --> C{用户操作}
    C -->|点击服务卡片| D[服务卡片高亮选中]
    D --> E[更新底部价格显示]
    E --> F{是否已选服务?}
    F -->|是| G[启用"下一步"按钮]
    F -->|否| H["下一步"按钮置灰]
    C -->|点击服务详情图标| I[弹出服务详情弹窗]
    I --> J[显示服务说明/时长/价格]
    J --> K[关闭弹窗]
    K --> C
    G --> L[点击"下一步"]
    L --> M[跳转到理发师选择页]
```

#### 3.2.2 理发师选择流程

```mermaid
flowchart TD
    A[进入理发师选择页] --> B[展示理发师列表]
    B --> C{用户操作}
    C -->|点击理发师卡片| D[卡片高亮选中]
    D --> E[启用"下一步"按钮]
    C -->|点击"不指定理发师"| F[该选项高亮]
    F --> E
    C -->|点击理发师头像| G[查看理发师详情]
    G --> H[显示擅长项目/从业年限等]
    H --> I[返回列表]
    I --> C
    E --> J[点击"下一步"]
    J --> K[跳转到时间选择页]
```

#### 3.2.3 时间选择流程

```mermaid
flowchart TD
    A[进入时间选择页] --> B[展示日期选择器]
    B --> C[默认显示今日起7天]
    C --> D{用户选择日期}
    D --> E[加载该日期可用时间段]
    E --> F{是否有可用时间段?}
    F -->|是| G[展示时间段网格]
    F -->|否| H[显示"当日无可用时间"]
    G --> I{用户点击时间段}
    I --> J[时间段高亮选中]
    J --> K[启用"下一步"按钮]
    K --> L[点击"下一步"]
    L --> M[跳转到确认订单页]
    H --> N[建议选择其他日期]
    N --> D
```

### 3.3 步骤说明

| 步骤 | 用户操作 | 系统响应 | 关键决策点 |
|------|----------|----------|-----------|
| 1. 选择理发店 | 浏览店铺列表,点击进入 | 展示店铺详情(地址、营业时间、服务项目) | 距离、评分、价格 |
| 2. 选择服务 | 浏览服务列表,单选一项服务 | 显示服务价格和时长 | 服务类型、价格 |
| 3. 选择理发师 | 选择指定理发师或不指定 | 展示理发师信息(照片、擅长、评分) | 理发师技能、个人偏好 |
| 4. 选择时间 | 选择日期和具体时间段 | 展示可用时间段,已预约时段置灰 | 个人日程安排 |
| 5. 确认订单 | 核对信息,填写备注,提交 | 显示完整预约信息 | 信息准确性 |
| 6. 预约成功 | 查看预约码和详情 | 生成预约记录,发送确认消息 | - |

---

## 4. 功能需求详述

### 4.1 理发店列表与详情

#### 4.1.1 店铺列表页
- **功能点**:
  - 展示附近理发店列表(基于用户定位)
  - 支持按距离/评分排序
  - 显示核心信息:店名、距离、人均价格、营业状态
  - 搜索功能(按店名搜索)

#### 4.1.2 店铺详情页
- **功能点**:
  - 展示店铺头图、地址、营业时间
  - 展示服务项目概览(名称、价格)
  - 展示理发师团队(头像、姓名)
  - "立即预约"按钮(CTA)

### 4.2 服务选择

#### 4.2.1 功能描述
用户从列表中选择一项服务,每次只能选择一项。

#### 4.2.2 功能点
- 展示服务列表:名称、价格、时长、简短描述
- 单选机制:点击即选中,再次点击取消选中
- 服务详情查看:点击信息图标查看详细说明
- 底部显示已选服务价格总计
- "下一步"按钮状态控制(未选中时置灰)

#### 4.2.3 数据字段
```
服务对象 {
  服务ID: string
  服务名称: string (如"经典剪发")
  价格: number
  预计时长: number (分钟)
  服务描述: string
  服务图标: url
}
```

### 4.3 理发师选择

#### 4.3.1 功能描述
用户可选择指定理发师或选择"不指定",系统将自动分配。

#### 4.3.2 功能点
- 展示理发师列表:头像、姓名、职称、擅长项目
- 单选机制(包含"不指定理发师"选项)
- 理发师详情查看:点击头像查看详细信息
- 显示理发师当前可约状态
- "下一步"按钮状态控制

#### 4.3.3 数据字段
```
理发师对象 {
  理发师ID: string
  姓名: string
  头像: url
  职称: string (如"高级发型师")
  从业年限: number
  擅长项目: array<string>
  当前状态: enum (可约/休息/已约满)
}
```

### 4.4 时间选择

#### 4.4.1 功能描述
用户选择预约日期和具体时间段,系统根据理发师排班和已有预约展示可用时间。

#### 4.4.2 功能点
- 日期选择:展示未来7天日历
- 时间段展示:以30分钟为单位展示时间网格
- 可用性标识:
  - 可选时间段:白色背景
  - 已被预约:灰色背景+不可点击
  - 当前选中:品牌色高亮
- 自动过滤:已过去的时间段自动置灰
- 实时更新:每次切换日期重新加载可用时间

#### 4.4.3 时间段计算逻辑
- 营业时间:9:00-21:00
- 时间粒度:30分钟
- 判断逻辑:
  ```
  可用性 = (当前时间段未被预约) AND 
           (时间段 + 服务时长 <= 营业结束时间) AND
           (时间段 > 当前时间)
  ```

#### 4.4.4 数据字段
```
时间段对象 {
  日期: date
  开始时间: time
  结束时间: time
  状态: enum (可用/已预约/已过期)
  理发师ID: string (如未指定则为null)
}
```

### 4.5 订单确认与提交

#### 4.5.1 功能描述
展示完整预约信息供用户最终确认,支持填写备注信息。

#### 4.5.2 功能点
- 信息汇总展示:
  - 店铺名称和地址
  - 服务项目和价格
  - 理发师姓名(或"不指定")
  - 预约日期和时间
- 备注输入框(选填,限50字)
- "返回修改"和"确认预约"按钮
- 提交加载状态提示
- 错误处理:
  - 时间段已被占用:提示并返回时间选择页
  - 网络错误:提示重试

#### 4.5.3 提交数据结构
```
预约订单 {
  店铺ID: string
  服务ID: string
  理发师ID: string | null
  预约日期: date
  预约时间: time
  用户ID: string
  备注: string
  创建时间: timestamp
}
```

### 4.6 预约成功页

#### 4.6.1 功能描述
展示预约成功信息和预约凭证。

#### 4.6.2 功能点
- 成功提示动画
- 展示预约码(用于到店核销)
- 显示预约详情(同确认页信息)
- "查看我的预约"按钮
- "返回首页"按钮

### 4.7 我的预约

#### 4.7.1 功能描述
用户查看自己的预约记录。

#### 4.7.2 功能点
- 预约列表展示:
  - 待服务(未来预约)
  - 已完成(历史记录)
- 预约详情查看
- 取消预约功能(距预约时间2小时以上可取消)

---

## 5. 非功能需求

### 5.1 性能要求
- 页面加载时间 < 2秒
- 接口响应时间 < 500ms
- 支持并发预约(避免时间段冲突)

### 5.2 兼容性
- iOS 12.0及以上
- Android 8.0及以上
- 主流机型适配

### 5.3 安全性
- 用户数据加密传输(HTTPS)
- 手机号验证登录
- 预约信息防篡改

### 5.4 可用性
- 7x24小时服务可用率 > 99%
- 优雅降级:部分功能异常不影响核心流程

### 5.5 数据一致性
- 时间段预约原子性操作(避免超卖)
- 理发师排班数据实时同步

---

## 6. 界面元素详述

### 6.1 服务选择页

#### 6.1.1 页面布局
```
┌─────────────────────────────┐
│  ← 返回    选择服务          │ ← 顶部导航栏(固定)
├─────────────────────────────┤
│                             │
│  ┌─────────────────────┐   │
│  │ 经典剪发         ℹ️  │   │
│  │ ¥38  约45分钟       │   │ ← 服务卡片(可滚动列表)
│  └─────────────────────┘   │
│                             │
│  ┌─────────────────────┐   │
│  │ 洗剪吹套餐       ℹ️  │   │
│  │ ¥68  约60分钟       │   │
│  └─────────────────────┘   │
│                             │
│         ...更多服务          │
│                             │
├─────────────────────────────┤
│ 已选: 经典剪发  ¥38         │
│          [下一步]           │ ← 底部操作栏(固定)
└─────────────────────────────┘
```

#### 6.1.2 关键UI组件

| 组件名称 | 类型 | 位置 | 功能描述 |
|---------|------|------|----------|
| 导航栏 | NavigationBar | 顶部 | 显示页面标题"选择服务",左侧返回按钮 |
| 服务卡片 | Card | 中部列表 | 展示单个服务信息,支持点击选中 |
| 服务图标 | Image | 卡片左侧 | 展示服务类型图标(如剪刀图标) |
| 服务名称 | Text | 卡片中部 | 粗体显示,字号16sp |
| 价格和时长 | Text | 卡片下方 | 灰色字体,字号14sp,格式"¥XX 约XX分钟" |
| 详情按钮 | IconButton | 卡片右侧 | 信息图标(ℹ️),点击弹出详情 |
| 服务详情弹窗 | Modal | 屏幕中央 | 半屏弹窗,展示详细服务说明 |
| 底部汇总栏 | FixedBar | 底部 | 展示已选服务和价格 |
| 下一步按钮 | Button | 底部中央 | 主要按钮样式,宽度80% |

#### 6.1.3 交互反馈

**服务卡片点击交互**:
- **默认状态**: 白色背景,浅灰边框
- **点击瞬间**: 轻微缩放动画(scale 0.98)
- **选中状态**: 品牌色边框(2px),背景浅色渲染,左上角显示勾选图标
- **取消选中**: 点击已选中卡片,恢复默认状态

**下一步按钮状态**:
- **未选择服务**: 灰色背景,文字灰色,不可点击
- **已选择服务**: 品牌色背景,白色文字,可点击
- **点击动画**: 轻微缩放反馈

**详情弹窗交互**:
- **打开**: 从底部滑入动画(300ms)
- **内容**: 服务名称(大标题)、详细描述、适用人群、时长说明
- **关闭**: 点击遮罩层或"知道了"按钮,滑出动画

---

### 6.2 理发师选择页

#### 6.2.1 页面布局
```
┌─────────────────────────────┐
│  ← 返回   选择理发师         │ ← 顶部导航栏
├─────────────────────────────┤
│  ┌─────────────────────┐   │
│  │ [✓] 不指定理发师    │   │ ← 特殊选项(置顶)
│  │     由系统自动分配   │   │
│  └─────────────────────┘   │
├─────────────────────────────┤
│  ┌───────────────────────┐ │
│  │  👤  张师傅           │ │
│  │      高级发型师        │ │ ← 理发师卡片
│  │      擅长: 烫染/造型   │ │
│  │      [可约]           │ │
│  └───────────────────────┘ │
│                             │
│  ┌───────────────────────┐ │
│  │  👤  李师傅           │ │
│  │      资深发型师        │ │
│  │      擅长: 剪发/修剪   │ │
│  │      [已约满]         │ │
│  └───────────────────────┘ │
│                             │
├─────────────────────────────┤
│          [下一步]           │ ← 底部按钮
└─────────────────────────────┘
```

#### 6.2.2 关键UI组件

| 组件名称 | 类型 | 位置 | 功能描述 |
|---------|------|------|----------|
| 导航栏 | NavigationBar | 顶部 | 标题"选择理发师",返回按钮 |
| 不指定选项卡 | Card | 列表顶部 | 特殊样式,虚线边框,默认选中 |
| 理发师卡片 | Card | 滚动列表 | 横向布局,左侧头像右侧信息 |
| 头像 | Avatar | 卡片左侧 | 圆形头像,尺寸60x60dp |
| 姓名标签 | Text | 头像右侧 | 粗体,字号16sp |
| 职称标签 | Text | 姓名下方 | 灰色,字号13sp |
| 擅长标签 | Tags | 职称下方 | 小标签形式,灰色背景 |
| 状态徽章 | Badge | 卡片右上角 | 圆角矩形,根据状态变色 |
| 下一步按钮 | Button | 底部固定 | 同服务选择页样式 |

#### 6.2.3 交互反馈

**不指定选项交互**:
- **默认状态**: 虚线边框,内含提示文案
- **点击**: 边框变实线+品牌色,显示勾选图标
- **与理发师互斥**: 选择具体理发师时,该选项自动取消

**理发师卡片交互**:
- **默认状态**: 白色背景,浅灰边框
- **Hover/按下**: 背景变浅灰
- **选中状态**: 品牌色边框,背景轻微渲染,右上角勾选图标
- **点击头像**: 跳转到理发师详情页(全屏Modal)

**状态徽章样式**:
- **可约**: 绿色背景,文字"可约"
- **已约满**: 红色背景,文字"已约满",卡片整体置灰不可选
- **休息中**: 灰色背景,文字"休息中",不可选

**理发师详情页**:
- **布局**: 顶部大头像,下方个人简介、从业年限、擅长风格、作品展示(图片墙)
- **关闭**: 左上角关闭按钮或下滑手势

---

### 6.3 时间选择页

#### 6.3.1 页面布局
```
┌─────────────────────────────┐
│  ← 返回   选择时间           │ ← 顶部导航栏
├─────────────────────────────┤
│  10月28日 10月29日 10月30日 │
│  周一     周二     周三      │ ← 日期横向滚动选择器
│  (今天)   明天     后天      │
├─────────────────────────────┤
│  上午                        │
│  ┌────┬────┬────┬────┐    │
│  │9:00│9:30│10:0│10:3│    │
│  └────┴────┴────┴────┘    │ ← 时间段网格
│  ┌────┬────┬────┬────┐    │   (上下滚动)
│  │11:0│11:3│12:0│12:3│    │
│  └────┴────┴────┴────┘    │
│                             │
│  下午                        │
│  ┌────┬────┬────┬────┐    │
│  │13:0│13:3│14:0│14:3│    │
│  └────┴────┴────┴────┘    │
│      ...更多时间段...        │
│                             │
├─────────────────────────────┤
│ 已选: 10月28日 14:00        │
│          [下一步]           │ ← 底部操作栏
└─────────────────────────────┘
```

#### 6.3.2 关键UI组件

| 组件名称 | 类型 | 位置 | 功能描述 |
|---------|------|------|----------|
| 导航栏 | NavigationBar | 顶部 | 标题"选择时间",返回按钮 |
| 日期选择器 | HorizontalScroll | 顶部下方 | 横向滚动,展示7天日期 |
| 日期卡片 | Card | 选择器内 | 显示日期、星期、标签(今天/明天) |
| 时段标题 | Text | 内容区 | "上午"/"下午"分组标题 |
| 时间网格 | Grid | 主体区域 | 4列布局,每格代表30分钟 |
| 时间格子 | Button | 网格单元 | 显示具体时间,如"9:00" |
| 底部汇总 | FixedBar | 底部 | 显示已选日期时间 |
| 下一步按钮 | Button | 底部 | 同前页样式 |

#### 6.3.3 交互反馈

**日期选择交互**:
- **默认样式**: 白色背景,灰色文字,圆角卡片
- **当前日期**: 底部品牌色下划线
- **选中状态**: 品牌色背景,白色文字,轻微放大
- **切换动画**: 淡入淡出切换(200ms)
- **滚动**: 左右滑动切换日期,中间日期自动居中

**时间格子交互**:
- **可选状态**: 
  - 白色背景,灰色边框
  - 点击: 瞬间缩放效果
  - 选中: 品牌色背景,白色文字,边框消失
- **已预约状态**:
  - 灰色背景,浅灰文字
  - 禁用点击,无交互反馈
  - 显示"已约"小标签(可选)
- **已过期状态**:
  - 浅灰背景,删除线文字
  - 不可点击

**时段加载**:
- 切换日期时,时间网格显示骨架屏(Skeleton)
- 加载完成后渐显动画

**无可用时间处理**:
- 显示空状态插图
- 提示文案: "当天暂无可用时间,请选择其他日期"
- 推荐按钮: "查看明天" / "查看后天"

---

### 6.4 确认订单页

#### 6.4.1 页面布局
```
┌─────────────────────────────┐
│  ← 返回   确认预约           │ ← 顶部导航栏
├─────────────────────────────┤
│                             │
│  📍 店铺信息                │
│  ┌─────────────────────┐   │
│  │ XX理发店            │   │
│  │ 地址: XXX路XX号     │   │ ← 店铺信息卡片
│  │ 营业时间: 9:00-21:00│   │
│  └─────────────────────┘   │
│                             │
│  📋 预约详情                │
│  ┌─────────────────────┐   │
│  │ 服务项目: 经典剪发   │   │
│  │ 价格: ¥38           │   │
│  │ 时长: 约45分钟      │   │ ← 预约信息卡片
│  │                     │   │
│  │ 理发师: 张师傅       │   │
│  │                     │   │
│  │ 预约时间:            │   │
│  │ 10月28日 14:00-14:45│   │
│  └─────────────────────┘   │
│                             │
│  💬 备注 (选填)             │
│  ┌─────────────────────┐   │
│  │ 请在此输入备注...    │   │ ← 多行文本输入框
│  │                     │   │
│  └─────────────────────┘   │
│                             │
├─────────────────────────────┤
│  [返回修改]  [确认预约]     │ ← 底部双按钮
└─────────────────────────────┘
```

#### 6.4.2 关键UI组件

| 组件名称 | 类型 | 位置 | 功能描述 |
|---------|------|------|----------|
| 导航栏 | NavigationBar | 顶部 | 标题"确认预约",返回按钮 |
| 分组标题 | Text | 各卡片上方 | 带图标的分组标题,如"📍 店铺信息" |
| 店铺信息卡 | Card | 上部 | 展示店铺名称、地址、营业时间 |
| 预约详情卡 | Card | 中部 | 汇总所有预约选择信息 |
| 信息行 | Row | 卡片内 | 左侧标签右侧内容的行布局 |
| 备注输入框 | TextArea
| 字数统计 | Text | 输入框右下 | 实时显示"X/50" |
| 返回修改按钮 | Button | 底部左侧 | 次要按钮样式(白底灰边) |
| 确认预约按钮 | Button | 底部右侧 | 主要按钮样式(品牌色) |

#### 6.4.3 交互反馈

**信息卡片**:
- **样式**: 白色背景,圆角12dp,轻微阴影
- **间距**: 卡片之间间距16dp
- **分割线**: 信息行之间浅灰分割线(1px)

**备注输入框交互**:
- **默认状态**: 灰色边框,占位符文字"请输入特殊需求(选填)"
- **聚焦状态**: 品牌色边框,占位符消失
- **输入中**: 右下角实时显示字数"15/50"
- **超出限制**: 字数变红色,无法继续输入
- **失焦**: 边框恢复灰色

**返回修改按钮交互**:
- **样式**: 白色背景,灰色边框,灰色文字
- **点击**: 轻微缩放,返回上一页(保留已填信息)
- **宽度**: 占底部35%

**确认预约按钮交互**:
- **默认状态**: 品牌色背景,白色文字
- **点击瞬间**: 缩放动画+haptic反馈
- **提交中**: 
  - 按钮文字变为"提交中..."
  - 显示loading动画(旋转圆圈)
  - 禁用点击防止重复提交
- **成功**: 跳转到成功页
- **失败**: 
  - 顶部弹出错误提示(Toast)
  - 按钮恢复可点击状态
  - 常见错误提示:
    - "该时间段已被预约,请重新选择"
    - "网络异常,请稍后重试"
- **宽度**: 占底部60%

**信息修改快捷入口**:
- 每个信息行右侧可显示"修改"文字链接(可选设计)
- 点击直接跳转到对应选择页,返回时保留其他信息

---

### 6.5 预约成功页

#### 6.5.1 页面布局
```
┌─────────────────────────────┐
│          ✓ 预约成功          │ ← 顶部标题(无返回按钮)
├─────────────────────────────┤
│                             │
│         🎉                  │
│     预约已确认!              │
│                             │ ← 成功提示区
│   ┌───────────────────┐    │
│   │                   │    │
│   │    QR CODE        │    │ ← 预约码(二维码)
│   │                   │    │
│   │   8624 5391       │    │
│   └───────────────────┘    │
│   请凭此码到店核销           │
│                             │
├─────────────────────────────┤
│  📋 预约详情                │
│  ┌─────────────────────┐   │
│  │ XX理发店            │   │
│  │ 地址: XXX路XX号     │   │
│  │                     │   │
│  │ 服务: 经典剪发       │   │ ← 预约信息卡片
│  │ 理发师: 张师傅       │   │
│  │ 时间: 10月28日      │   │
│  │       14:00-14:45   │   │
│  │                     │   │
│  │ 💡 温馨提示:         │   │
│  │ 请提前5分钟到店      │   │
│  └─────────────────────┘   │
│                             │
├─────────────────────────────┤
│     [查看我的预约]          │
│     [返回首页]              │ ← 底部操作按钮
└─────────────────────────────┘
```

#### 6.5.2 关键UI组件

| 组件名称 | 类型 | 位置 | 功能描述 |
|---------|------|------|----------|
| 成功标题 | Text | 顶部中央 | 大号文字"预约成功",绿色对勾图标 |
| 动画图标 | Lottie | 上部中央 | 成功动画(对勾展开/礼花) |
| 预约码卡片 | Card | 中上部 | 展示二维码和数字码 |
| 二维码 | QRCode | 卡片中央 | 200x200dp,包含预约ID |
| 数字码 | Text | 二维码下方 | 8位数字,等宽字体,可复制 |
| 提示文字 | Text | 码下方 | 灰色小字,说明用途 |
| 详情卡片 | Card | 中下部 | 汇总预约信息 |
| 温馨提示 | InfoBox | 卡片底部 | 浅黄背景,显示注意事项 |
| 查看预约按钮 | Button | 底部上方 | 次要按钮样式 |
| 返回首页按钮 | Button | 底部下方 | 文字链接样式 |

#### 6.5.3 交互反馈

**页面进入动画**:
- **成功图标**: 从小到大弹出(scale 0→1),300ms
- **对勾动画**: 绿色对勾描边动画,500ms
- **礼花效果**: 彩色粒子飘落效果(可选)
- **内容展示**: 依次淡入,每个元素间隔100ms

**预约码交互**:
- **二维码**: 
  - 点击放大显示(全屏Modal)
  - 长按保存到相册
  - 亮度自动提升(便于扫描)
- **数字码**:
  - 长按复制数字码
  - 复制后显示Toast提示"已复制"
  - 数字码支持分享(调用系统分享)

**详情卡片**:
- **地址行**: 点击地址调起地图导航
- **电话行**: 点击店铺电话直接拨打(需添加此信息)
- **日历添加**: 底部可选"添加到日历"按钮

**按钮交互**:
- **查看我的预约**:
  - 品牌色边框+文字
  - 点击跳转到"我的预约"列表
  - 自动定位到当前预约
- **返回首页**:
  - 纯文字链接样式
  - 点击返回店铺列表页
  - 清空导航栈

**防误操作**:
- 页面顶部无返回按钮
- 使用系统返回时弹出确认:"确定离开?可在'我的预约'中查看详情"

---

### 6.6 我的预约列表页

#### 6.6.1 页面布局
```
┌─────────────────────────────┐
│  ← 返回   我的预约           │ ← 顶部导航栏
├─────────────────────────────┤
│  [待服务]  [已完成]         │ ← Tab切换
├─────────────────────────────┤
│                             │
│  ┌─────────────────────┐   │
│  │ XX理发店            │   │
│  │ 经典剪发 | 张师傅    │   │
│  │                     │   │ ← 预约卡片
│  │ ⏰ 10月28日 14:00   │   │
│  │                     │   │
│  │ [查看详情] [取消预约]│   │
│  └─────────────────────┘   │
│                             │
│  ┌─────────────────────┐   │
│  │ YY理发店            │   │
│  │ 洗剪吹 | 李师傅      │   │
│  │                     │   │
│  │ ⏰ 10月30日 10:00   │   │
│  │                     │   │
│  │ [查看详情] [取消预约]│   │
│  └─────────────────────┘   │
│                             │
└─────────────────────────────┘
```

#### 6.6.2 关键UI组件

| 组件名称 | 类型 | 位置 | 功能描述 |
|---------|------|------|----------|
| 导航栏 | NavigationBar | 顶部 | 标题"我的预约",返回按钮 |
| Tab栏 | TabBar | 导航下方 | 两个选项卡:待服务/已完成 |
| 预约卡片 | Card | 滚动列表 | 展示单条预约信息 |
| 店铺名称 | Text | 卡片顶部 | 粗体,字号16sp |
| 服务信息 | Text | 名称下方 | 灰色,格式"服务名 \| 理发师" |
| 时间标签 | Tag | 卡片中部 | 时钟图标+时间文字 |
| 状态徽章 | Badge | 卡片右上角 | 显示预约状态 |
| 操作按钮组 | ButtonGroup | 卡片底部 | 查看详情+取消预约 |
| 空状态 | EmptyState | 列表为空时 | 插图+提示文字 |

#### 6.6.3 交互反馈

**Tab切换**:
- **默认样式**: 灰色文字,底部无下划线
- **选中样式**: 品牌色文字,底部品牌色下划线(3px)
- **切换动画**: 下划线滑动动画(200ms),内容淡入淡出

**预约卡片状态**:
- **待服务卡片**:
  - 白色背景,正常显示
  - 右上角状态:"待服务"(绿色)
  - 距离预约时间<2小时:显示倒计时"1小时30分后"
- **已完成卡片**:
  - 轻微灰色背景
  - 右上角状态:"已完成"(灰色)
  - 隐藏"取消预约"按钮
  - 显示"再次预约"按钮(可选)

**查看详情按钮**:
- 样式:白色背景,灰色边框
- 点击:弹出预约详情Modal(同预约成功页布局)
- Modal包含:二维码、完整信息、店铺电话、导航按钮

**取消预约交互**:
- 样式:红色文字,无边框
- 点击:弹出确认对话框
  ```
  ┌─────────────────────┐
  │   确认取消预约?      │
  │                     │
  │ 取消后需重新预约     │
  │                     │
  │  [再想想]  [确认取消]│
  └─────────────────────┘
  ```
- 确认后:
  - 显示loading
  - 成功:Toast提示"已取消",卡片从列表移除(动画)
  - 失败:Toast提示错误原因
- 限制条件:
  - 距预约时间<2小时:禁用按钮,提示"距预约时间过近,无法取消"

**下拉刷新**:
- 支持下拉刷新最新状态
- 刷新动画:旋转loading图标

**空状态**:
- **待服务为空**: 
  - 插图:空日历图标
  - 文字:"暂无预约"
  - 按钮:"去预约" → 跳转首页
- **已完成为空**:
  - 插图:空盒子图标
  - 文字:"暂无历史记录"

---

## 7. 技术实现补充说明

### 7.1 状态管理建议
- 使用本地状态管理预约流程中的临时数据
- 用户预约列表需支持本地缓存(优先展示缓存,后台更新)

### 7.2 时间段冲突处理
```
预约提交流程:
1. 用户点击"确认预约"
2. 前端发送预约请求(包含时间段锁定标识)
3. 后端检查时间段可用性
4. 如可用:创建预约记录,返回成功
5. 如已被占用:返回错误码,前端提示用户重选
```

### 7.3 关键API接口

| 接口名称 | 方法 | 路径 | 说明 |
|---------|------|------|------|
| 获取店铺列表 | GET | /api/shops | 支持定位和搜索参数 |
| 获取店铺详情 | GET | /api/shops/:id | 包含服务和理发师信息 |
| 获取可用时间段 | GET | /api/availability | 参数:shopId, stylistId, date, serviceId |
| 创建预约 | POST | /api/appointments | Body包含完整预约信息 |
| 获取我的预约 | GET | /api/my-appointments | 参数:status(pending/completed) |
| 取消预约 | PUT | /api/appointments/:id/cancel | 需验证取消条件 |

### 7.4 数据验证规则
- 服务ID必须属于选定店铺
- 理发师ID必须属于选定店铺(如指定)
- 预约时间必须在营业时间内
- 预约时间必须晚于当前时间至少30分钟
- 备注字数≤50字符

---

## 8. 验收标准

### 8.1 功能验收
- [ ] 用户可完整走通预约流程(5分钟内完成)
- [ ] 时间段冲突时正确提示并阻止预约
- [ ] 取消预约功能正常工作
- [ ] 预约码可正常生成和展示
- [ ] 所有必填项未填写时,下一步按钮正确置灰

### 8.2 体验验收
- [ ] 所有页面加载时间<2秒
- [ ] 按钮点击有明显反馈
- [ ] 表单输入流畅无卡顿
- [ ] 错误提示清晰友好
- [ ] 各页面风格统一,视觉舒适

### 8.3 兼容性验收
- [ ] iOS/Android主流机型测试通过
- [ ] 不同屏幕尺寸适配正常
- [ ] 横竖屏切换无异常(可锁定竖屏)

---

## 9. 后续迭代方向

### 9.1 Phase 2 功能
- 在线支付功能
- 用户评价系统
- 理发师作品展示
- 优惠券/会员系统

### 9.2 Phase 3 功能
- 智能推荐理发师
- 排队叫号功能
- 社交分享
- 数据分析仪表盘(B端)

---

## 附录:设计规范参考

### A1. 色彩规范
- **品牌主色**: #FF6B6B (可根据实际品牌调整)
- **辅助色**: #4ECDC4
- **成功色**: #95E1D3
- **警告色**: #F38181
- **文字主色**: #2C3E50
- **文字辅色**: #95A5A6
- **背景色**: #F8F9FA

### A2. 字体规范
- **主标题**: 20sp, 粗体
- **副标题**: 16sp, 粗体
- **正文**: 14sp, 常规
- **辅助文字**: 12sp, 常规
- **字体**: 系统默认(iOS: SF Pro / Android: Roboto)

### A3. 间距规范
- **页面边距**: 16dp
- **卡片间距**: 12dp
- **卡片内边距**: 16dp
- **元素间距**: 8dp/12dp/16dp(小/中/大)